CREATE DATABASE `kami`;

USE `kami`;

CREATE TABLE `direccion` (
    `id_direccion` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `calle` VARCHAR(45),
    `numero` INT(8),
    `pais` VARCHAR(45),
    `poblacion` VARCHAR(45),
    `provincia` VARCHAR(45),
    `codigo_postal` INT
);

CREATE TABLE `empresa` (
    `id_empresa` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `cif` VARCHAR(8),
    `nombre` VARCHAR(45),
    `id_direccion` INT,
    FOREIGN KEY (id_direccion)
        REFERENCES direccion (id_direccion)
);

CREATE TABLE `tipoEmpresa` (
    `id_tipo` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `tipo` VARCHAR(9) CHECK (tipo IN (`propia` , `cliente`, `proveedor`))
);

CREATE TABLE `empresaTipoEmpresa` (
    `id_tipo` INT,
    FOREIGN KEY (`id_tipo`)
        REFERENCES `tipoEmpresa` (`id_tipo`),
    `id_empresa` INT,
    FOREIGN KEY (`id_empresa`)
        REFERENCES `empresa` (`id_empresa`)
);

CREATE TABLE `email` (
    `id_email` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `email` VARCHAR(45),
    `id_empresa` INT,
    FOREIGN KEY (`id_empresa`)
        REFERENCES `empresa` (`id_empresa`)
);

CREATE TABLE `telefono` (
    `id_telefono` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `telefono` INT,
    `id_empresa` INT,
    FOREIGN KEY (`id_empresa`)
        REFERENCES `empresa` (`id_empresa`)
);

CREATE TABLE `fax` (
    `id_fax` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `fax` INT,
    `id_empresa` INT,
    FOREIGN KEY (`id_empresa`)
        REFERENCES `empresa` (`id_empresa`)
);
